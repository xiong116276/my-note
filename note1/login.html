<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
				content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta content="telephone=no" name="format-detection">
	<link rel="icon" href="img/note.ico"/>
	<title>登录</title>
	<link rel="stylesheet" href="css/note.min.css">
</head>
<body>
	<div class="modal">
		<div class="login">
			<form action="">
				<div class="input-group">
					<input id="uname" type="text" name="uname" placeholder="请输入账号">
				</div>
				<div class="input-group">
					<input id="upassword" type="password" name="upassword" placeholder="请输入密码">
				</div>
				<div class="btn-login">
					登录
				</div>
			</form>
		</div>
	</div>
	<script>
    document.getElementsByClassName("btn-login")[0].onclick = function () {
      login();
    };
    function login() {
      let uname = document.getElementById("uname").value;
      let upassword = document.getElementById("upassword").value;
      if(uname.length > 0&&upassword.length > 0){
        let ajax = new XMLHttpRequest();
        ajax.open('get','data/login.php?uname='+uname+'&upassword='+upassword);
        ajax.send();
        ajax.onreadystatechange = function () {
          if (ajax.readyState===4 &&ajax.status===200) {
            let arr = JSON.parse(ajax.responseText);
            switch (arr.state){
              case 0 :
                alert("账户不存在！");
                break;
              case 1 :
                alert("登录成功！");
                sessionStorage.setItem("uname",uname);
                window.location.href = "index.html";
                break;
              case 2 :
                alert("密码错误！");
                break;
            }
          }
        };
      }
    }
	</script>
</body>
</html>